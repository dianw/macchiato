"use strict";!function(){angular.module("es",["angular-loading-bar","ngSanitize","restangular","ui.bootstrap","ui.router"])}(),function(){angular.module("es").controller("ContactFormCtrl",["$state","$stateParams","RestContactService",function(a,t,r){function e(){r.one(t.id).get().then(function(a){a.phone=Number(a.phone),n.contact=a})}function o(t){t.id?t.put().then(function(){a.go("contact-list")}):r.post(t).then(function(){a.go("contact-list")})}var n=this;n.contact={},n.load=e,n.save=o,"+"!==t.id&&e()}])}(),function(){angular.module("es").controller("ContactListCtrl",["$location","RestContactService",function(a,t){function r(){o.searchParams.hash++,o.searchParams.page=o.currentPage-1,delete o.searchParams.offset,a.search(o.searchParams),o.searchParams.offset=o.searchParams.max*o.searchParams.page,t.getList(o.searchParams).then(function(a){o.contacts=a})}function e(a){var t=window.confirm("Delete contacts?");t&&a.remove().then(function(){r()})}var o=this;o["delete"]=e,o.search=r,o.searchParams=a.search(),o.searchParams.hash=0,o.searchParams.page=_.defaultTo(o.searchParams.page,0),o.searchParams.max=_.defaultTo(o.searchParams.max,10),o.currentPage=_.defaultTo(o.currentPage,o.searchParams.page+1),r()}])}(),function(){angular.module("es").config(["$stateProvider",function(a){a.state("contact-list",{url:"/backend/contacts",controller:"ContactListCtrl as ctrl",templateUrl:"app/contact/contact.list.html"}).state("contact-form",{url:"/backend/contacts/:id",controller:"ContactFormCtrl as ctrl",templateUrl:"app/contact/contact.form.html"})}])}(),function(){angular.module("es").factory("RestContactService",["Restangular",function(a){return a.service("contacts")}])}(),function(){angular.module("es").controller("GroupFormCtrl",["$state","$stateParams","RestGroupService",function(a,t,r){function e(){r.one(t.id).get().then(function(a){n.group=a})}function o(t){t.id?t.put().then(function(){a.go("group-list")}):r.post(t).then(function(){a.go("group-list")})}var n=this;n.group={},n.load=e,n.save=o,"+"!==t.id&&e()}])}(),function(){angular.module("es").controller("GroupListCtrl",["$location","RestGroupService",function(a,t){function r(){o.searchParams.hash++,o.searchParams.page=o.currentPage-1,delete o.searchParams.offset,a.search(o.searchParams),o.searchParams.offset=o.searchParams.max*o.searchParams.page,t.getList(o.searchParams).then(function(a){o.groups=a})}function e(a){var t=window.confirm("Delete groups?");t&&a.remove().then(function(){r()})}var o=this;o["delete"]=e,o.search=r,o.searchParams=a.search(),o.searchParams.hash=0,o.searchParams.page=_.defaultTo(o.searchParams.page,0),o.searchParams.max=_.defaultTo(o.searchParams.max,10),o.currentPage=_.defaultTo(o.currentPage,o.searchParams.page+1),r()}])}(),function(){angular.module("es").config(["$stateProvider",function(a){a.state("group-list",{url:"/backend/groups",controller:"GroupListCtrl as ctrl",templateUrl:"app/group/group.list.html"}).state("group-form",{url:"/backend/groups/:id",controller:"GroupFormCtrl as ctrl",templateUrl:"app/group/group.form.html"})}])}(),function(){angular.module("es").factory("RestGroupService",["Restangular",function(a){return a.service("groups")}])}(),function(){angular.module("es").config(["$httpProvider","RestangularProvider",function(a,t){t.setBaseUrl("/api"),t.setDefaultHttpFields({cache:!1}),t.addResponseInterceptor(function(a,t){var r;return"getList"===t&&angular.isObject(a)&&!angular.isArray(a)?(r=angular.copy(a.rows,r),delete a.rows,r.meta=a):r=a,r})}])}(),function(){function a(a,t,r){a.html5Mode(!0).hashPrefix("!"),t.otherwise("/backend/contacts"),r.strictMode(!1)}a.$inject=["$locationProvider","$urlRouterProvider","$urlMatcherFactoryProvider"],angular.module("es").config(a)}();